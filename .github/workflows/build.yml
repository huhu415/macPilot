name: Build App

on:
  push:
    branches: [ main ]  # å½“æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘
  pull_request:
    branches: [ main ]  # å½“åˆ›å»ºé’ˆå¯¹ main åˆ†æ”¯çš„ PR æ—¶è§¦å‘
  workflow_dispatch:    # æ”¯æŒæ‰‹åŠ¨è§¦å‘

jobs:
  build:
    runs-on: macos-latest

    steps:
      - uses: maxim-lobanov/setup-xcode@v1
        with:
          xcode-version: latest-stable

      - name: â¬‡ï¸ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        
      - name: ğŸ”§ æ„å»ºåº”ç”¨
        run: |
          xcodebuild clean build \
            -project "macPilot.xcodeproj" \
            -scheme "macPilot" \
            -configuration Release \
            -derivedDataPath ./DerivedData \
            CODE_SIGN_IDENTITY="" \
            CODE_SIGNING_REQUIRED=NO \
            CODE_SIGNING_ALLOWED=NO
        
      - name: ğŸ“¤ ä¸Šä¼ æ„å»ºäº§ç‰©
        uses: actions/upload-artifact@v4
        with:
          name: macPilot-app
          path: |
            ./DerivedData/Build/Products/Release/*.app
          if-no-files-found: error
